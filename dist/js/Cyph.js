(function(e,t){"use strict";var r=function(){return S.__string_rec(this,"")};function n(e,t){function r(){}r.prototype=e;var n=new r;for(var i in t)n[i]=t[i];if(t.toString!==Object.prototype.toString)n.toString=t.toString;return n}var i=function(){};i.__name__=true;i.cca=function(e,t){var r=e.charCodeAt(t);if(r!=r){return undefined}return r};var a=e["Cyph"]=function(){};a.__name__=true;a.generateGuid=function(e){var t=e*4;var r=f.getSecureRandomBytes(t);var n=g.fromBytes(r);var i=0;var s=e;while(i<s){var o=i++;var u=a.addressSpace[Math.floor(h.toFloat(n[o])/4294967296*a.addressSpace.length)|0];r.b[o]=u&255}var l=new y(r,0,e).readString(e);r.fill(0,t,0);return l};a.request=function(e,t,r,n,i){var a=typeof module!=="undefined"&&module.exports;if(a){var s=require("request");var o=function(e,t,r){if(e){i(e)}else if(t.statusCode!==200){i(r)}else{n(r)}};if(t){var u={form:{},url:e};r.forEach(function(e){u.form[e.k]=e.v});s.post(u,o)}else{s(e,o)}return}var l=new v(e);l.onData=n;l.onError=i;var _=0;while(_<r.length){var f=r[_];++_;l.setParameter(f.k,f.v)}l.request(t)};a.initiateSession=function(e,t,r,n){if(t==null){t=[]}var i=a.generateGuid(7);var s="https://"+(t.indexOf(a.options.video)>-1?a.services.video:t.indexOf(a.options.voice)>-1?a.services.voice:a.services.chat)+(t.indexOf(a.options.telehealth)>-1?"@":"")+(t.indexOf(a.options.modestBranding)>-1?"&":"")+(t.indexOf(a.options.disableP2P)>-1?"$":"")+(t.indexOf(a.options.nativeCrypto)>-1?"%":"")+i+a.generateGuid(19);a.request("https://simple-buu700-master-dot-cyphme.appspot.com/preauth",true,[{k:"apiKey",v:e},{k:"id",v:i}],function(e){r(s)},n)};var s=function(e,t){this.r=new RegExp(e,t.split("u").join(""))};s.__name__=true;s.prototype={match:function(e){if(this.r.global){this.r.lastIndex=0}this.r.m=this.r.exec(e);this.r.s=e;return this.r.m!=null},__class__:s};var o=function(){};o.__name__=true;o.exists=function(e,t){var r=e.iterator();while(r.hasNext()){var n=r.next();if(t(n)){return true}}return false};o.filter=function(e,t){var r=new u;var n=e.iterator();while(n.hasNext()){var i=n.next();if(t(i)){r.add(i)}}return r};var u=function(){this.length=0};u.__name__=true;u.prototype={add:function(e){var t=new l(e,null);if(this.h==null){this.h=t}else{this.q.next=t}this.q=t;this.length++},push:function(e){var t=new l(e,this.h);this.h=t;if(this.q==null){this.q=t}this.length++},iterator:function(){return new _(this.h)},__class__:u};var l=function(e,t){this.item=e;this.next=t};l.__name__=true;l.prototype={__class__:l};var _=function(e){this.head=e};_.__name__=true;_.prototype={hasNext:function(){return this.head!=null},next:function(){var e=this.head.item;this.head=this.head.next;return e},__class__:_};Math.__name__=true;var f=function(){};f.__name__=true;f.getSecureRandomBytes=function(e){var t="";try{var r=typeof crypto==="undefined"?require("crypto"):crypto;var n=r.randomBytes?r.randomBytes(e):r.getRandomValues(new R(e));var i=new p(new A(e));var a=0;var s=e;while(a<s){var o=a++;i.b[o]=n[o]&255}return i}catch(e){if(e instanceof b)e=e.val;t=""+c.string(e)}throw new b("Can't find a secure source of random bytes. Reason: "+t)};var c=function(){};c.__name__=true;c.string=function(e){return S.__string_rec(e,"")};var h={};h.__name__=true;h.toFloat=function(e){var t=e;if(t<0){return 4294967296+t}else{return t+0}};var v=function(e){this.url=e;this.headers=new u;this.params=new u;this.async=true;this.withCredentials=false};v.__name__=true;v.prototype={setParameter:function(e,t){this.params=o.filter(this.params,function(t){return t.param!=e});this.params.push({param:e,value:t});return this},request:function(e){var t=this;t.responseData=null;var r=this.req=O.createXMLHttpRequest();var n=function(e){if(r.readyState!=4){return}var n;try{n=r.status}catch(e){n=null}if(n!=null&&"undefined"!==typeof window){var i=window.location.protocol.toLowerCase();var a=new s("^(?:about|app|app-storage|.+-extension|file|res|widget):$","");var o=a.match(i);if(o){if(r.responseText!=null){n=200}else{n=404}}}if(n==undefined){n=null}if(n!=null){t.onStatus(n)}if(n!=null&&n>=200&&n<400){t.req=null;t.onData(t.responseData=r.responseText)}else if(n==null){t.req=null;t.onError("Failed to connect or resolve host")}else{switch(n){case 12007:t.req=null;t.onError("Unknown host");break;case 12029:t.req=null;t.onError("Failed to connect to host");break;default:t.req=null;t.responseData=r.responseText;t.onError("Http Error #"+r.status)}}};if(this.async){r.onreadystatechange=n}var i=this.postData;if(i!=null){e=true}else{var a=this.params.h;while(a!=null){var u=a.item;a=a.next;var l=u;if(i==null){i=""}else{i+="&"}var _=l.param;var f=encodeURIComponent(_)+"=";var c=l.value;i+=f+encodeURIComponent(c)}}try{if(e){r.open("POST",this.url,this.async)}else if(i!=null){var h=this.url.split("?").length<=1;r.open("GET",this.url+(h?"?":"&")+i,this.async);i=null}else{r.open("GET",this.url,this.async)}}catch(e){if(e instanceof b)e=e.val;t.req=null;this.onError(e.toString());return}r.withCredentials=this.withCredentials;if(!o.exists(this.headers,function(e){return e.header=="Content-Type"})&&e&&this.postData==null){r.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}var v=this.headers.h;while(v!=null){var p=v.item;v=v.next;var d=p;r.setRequestHeader(d.header,d.value)}r.send(i);if(!this.async){n(null)}},onData:function(e){},onError:function(e){},onStatus:function(e){},__class__:v};var p=function(e){this.length=e.byteLength;this.b=new R(e);this.b.bufferValue=e;e.hxBytes=this;e.bytes=this.b};p.__name__=true;p.prototype={fill:function(e,t,r){var n=0;var i=t;while(n<i){var a=n++;this.b[e++]=r&255}},getString:function(e,t){if(e<0||t<0||e+t>this.length){throw new b(w.OutsideBounds)}var r="";var n=this.b;var i=String.fromCharCode;var a=e;var s=e+t;while(a<s){var o=n[a++];if(o<128){if(o==0){break}r+=i(o)}else if(o<224){r+=i((o&63)<<6|n[a++]&127)}else if(o<240){var u=n[a++];r+=i((o&31)<<12|(u&127)<<6|n[a++]&127)}else{var l=n[a++];var _=n[a++];var f=(o&15)<<18|(l&127)<<12|(_&127)<<6|n[a++]&127;r+=i((f>>10)+55232);r+=i(f&1023|56320)}}return r},toString:function(){return this.getString(0,this.length)},__class__:p};var d=function(){};d.__name__=true;d.prototype={readByte:function(){throw new b("Not implemented")},readBytes:function(e,t,r){var n=r;var i=e.b;if(t<0||r<0||t+r>e.length){throw new b(w.OutsideBounds)}try{while(n>0){i[t]=this.readByte();++t;--n}}catch(e){if(e instanceof b)e=e.val;if(S.__instanceof(e,m)){}else throw e}return r-n},readFullBytes:function(e,t,r){while(r>0){var n=this.readBytes(e,t,r);if(n==0){throw new b(w.Blocked)}t+=n;r-=n}},readString:function(e){var t=new p(new A(e));this.readFullBytes(t,0,e);return t.toString()},__class__:d};var y=function(e,t,r){if(t==null){t=0}if(r==null){r=e.length-t}if(t<0||r<0||t+r>e.length){throw new b(w.OutsideBounds)}this.b=e.b;this.pos=t;this.len=r;this.totlen=r};y.__name__=true;y.__super__=d;y.prototype=n(d.prototype,{readByte:function(){if(this.len==0){throw new b(new m)}this.len--;return this.b[this.pos++]},readBytes:function(e,t,r){if(t<0||r<0||t+r>e.length){throw new b(w.OutsideBounds)}if(this.len==0&&r>0){throw new b(new m)}if(this.len<r){r=this.len}var n=this.b;var i=e.b;var a=0;var s=r;while(a<s){var o=a++;i[t+o]=n[this.pos+o]}this.pos+=r;this.len-=r;return r},__class__:y});var m=function(){};m.__name__=true;m.prototype={toString:function(){return"Eof"},__class__:m};var w={__ename__:true,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};w.Blocked=["Blocked",0];w.Blocked.toString=r;w.Blocked.__enum__=w;w.Overflow=["Overflow",1];w.Overflow.toString=r;w.Overflow.__enum__=w;w.OutsideBounds=["OutsideBounds",2];w.OutsideBounds.toString=r;w.OutsideBounds.__enum__=w;w.Custom=function(e){var t=["Custom",3,e];t.__enum__=w;t.toString=r;return t};var g={};g.__name__=true;g.fromBytes=function(e,t,r){if(t==null){t=0}if(r==null){r=e.length-t>>2}return new Uint32Array(e.b.bufferValue,t,r)};var b=function(e){Error.call(this);this.val=e;this.message=String(e);if(Error.captureStackTrace){Error.captureStackTrace(this,b)}};b.__name__=true;b.wrap=function(e){if(e instanceof Error){return e}else{return new b(e)}};b.__super__=Error;b.prototype=n(Error.prototype,{__class__:b});var S=function(){};S.__name__=true;S.getClass=function(e){if(e instanceof Array&&e.__enum__==null){return Array}else{var t=e.__class__;if(t!=null){return t}var r=S.__nativeClassName(e);if(r!=null){return S.__resolveNativeClass(r)}return null}};S.__string_rec=function(e,t){if(e==null){return"null"}if(t.length>=5){return"<...>"}var r=typeof e;if(r=="function"&&(e.__name__||e.__ename__)){r="object"}switch(r){case"function":return"<function>";case"object":if(e instanceof Array){if(e.__enum__){if(e.length==2){return e[0]}var n=e[0]+"(";t+="\t";var i=2;var a=e.length;while(i<a){var s=i++;if(s!=2){n+=","+S.__string_rec(e[s],t)}else{n+=S.__string_rec(e[s],t)}}return n+")"}var o=e.length;var u;var l="[";t+="\t";var _=0;var f=o;while(_<f){var c=_++;l+=(c>0?",":"")+S.__string_rec(e[c],t)}l+="]";return l}var h;try{h=e.toString}catch(e){return"???"}if(h!=null&&h!=Object.toString&&typeof h=="function"){var v=e.toString();if(v!="[object Object]"){return v}}var p=null;var d="{\n";t+="\t";var y=e.hasOwnProperty!=null;for(var p in e){if(y&&!e.hasOwnProperty(p)){continue}if(p=="prototype"||p=="__class__"||p=="__super__"||p=="__interfaces__"||p=="__properties__"){continue}if(d.length!=2){d+=", \n"}d+=t+p+" : "+S.__string_rec(e[p],t)}t=t.substring(1);d+="\n"+t+"}";return d;case"string":return e;default:return String(e)}};S.__interfLoop=function(e,t){if(e==null){return false}if(e==t){return true}var r=e.__interfaces__;if(r!=null){var n=0;var i=r.length;while(n<i){var a=n++;var s=r[a];if(s==t||S.__interfLoop(s,t)){return true}}}return S.__interfLoop(e.__super__,t)};S.__instanceof=function(e,t){if(t==null){return false}switch(t){case Array:if(e instanceof Array){return e.__enum__==null}else{return false}break;case L:return typeof e=="boolean";case q:return true;case E:return typeof e=="number";case C:if(typeof e=="number"){return(e|0)===e}else{return false}break;case String:return typeof e=="string";default:if(e!=null){if(typeof t=="function"){if(e instanceof t){return true}if(S.__interfLoop(S.getClass(e),t)){return true}}else if(typeof t=="object"&&S.__isNativeObj(t)){if(e instanceof t){return true}}}else{return false}if(t==k?e.__name__!=null:false){return true}if(t==T?e.__ename__!=null:false){return true}return e.__enum__==t}};S.__nativeClassName=function(e){var t=S.__toStr.call(e).slice(8,-1);if(t=="Object"||t=="Function"||t=="Math"||t=="JSON"){return null}return t};S.__isNativeObj=function(e){return S.__nativeClassName(e)!=null};S.__resolveNativeClass=function(e){return t[e]};var O=function(){};O.__name__=true;O.createXMLHttpRequest=function(){if(typeof XMLHttpRequest!="undefined"){return new XMLHttpRequest}if(typeof ActiveXObject!="undefined"){return new ActiveXObject("Microsoft.XMLHTTP")}throw new b("Unable to create XMLHttpRequest object.")};var B=function(e){if(e instanceof Array&&e.__enum__==null){this.a=e;this.byteLength=e.length}else{var t=e;this.a=[];var r=0;var n=t;while(r<n){var i=r++;this.a[i]=0}this.byteLength=t}};B.__name__=true;B.sliceImpl=function(e,t){var r=new R(this,e,t==null?null:t-e);var n=new A(r.byteLength);var i=new R(n);i.set(r);return n};B.prototype={slice:function(e,t){return new B(this.a.slice(e,t))},__class__:B};var x=function(){};x.__name__=true;x._new=function(e,t,r){var n;if(typeof e=="number"){n=[];var i=0;var a=e;while(i<a){var s=i++;n[s]=0}n.byteLength=n.length;n.byteOffset=0;n.buffer=new B(n)}else if(S.__instanceof(e,B)){var o=e;if(t==null){t=0}if(r==null){r=o.byteLength-t}if(t==0){n=o.a}else{n=o.a.slice(t,t+r)}n.byteLength=n.length;n.byteOffset=t;n.buffer=o}else if(e instanceof Array&&e.__enum__==null){n=e.slice();n.byteLength=n.length;n.byteOffset=0;n.buffer=new B(n)}else{throw new b("TODO "+c.string(e))}n.subarray=x._subarray;n.set=x._set;return n};x._set=function(e,t){if(S.__instanceof(e.buffer,B)){var r=e;if(e.byteLength+t>this.byteLength){throw new b("set() outside of range")}var n=0;var i=e.byteLength;while(n<i){var a=n++;this[a+t]=r[a]}}else if(e instanceof Array&&e.__enum__==null){var s=e;if(s.length+t>this.byteLength){throw new b("set() outside of range")}var o=0;var u=s.length;while(o<u){var l=o++;this[l+t]=s[l]}}else{throw new b("TODO")}};x._subarray=function(e,t){var r=x._new(this.slice(e,t));r.byteOffset=e;return r};String.prototype.__class__=String;String.__name__=true;Array.__name__=true;var C={__name__:["Int"]};var q={__name__:["Dynamic"]};var E=Number;E.__name__=["Float"];var L=Boolean;L.__ename__=["Bool"];var k={__name__:["Class"]};var T={};var A=t.ArrayBuffer||B;if(A.prototype.slice==null){A.prototype.slice=B.sliceImpl}var R=t.Uint8Array||x._new;a.addressSpace=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"].map(function(e){return i.cca(e,0)});a.services={chat:"simple-buu700-master-dot-cyph-im-dot-cyphme.appspot.com/#",voice:"simple-buu700-master-dot-cyph-im-dot-cyphme.appspot.com/#audio/",video:"simple-buu700-master-dot-cyph-im-dot-cyphme.appspot.com/#video/"};a.options={voice:1,video:2,modestBranding:3,disableP2P:4,nativeCrypto:5,telehealth:6};S.__toStr={}.toString;x.BYTES_PER_ELEMENT=1})(typeof exports!="undefined"?exports:typeof window!="undefined"?window:typeof self!="undefined"?self:this,typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this);